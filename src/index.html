<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glass Browser</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="glass.css">
    <style>
        /* Correções críticas para garantir funcionamento */
        body {
            display: flex;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            padding: 0;
        }
        
        .content-area {
            flex: 1;
            display: flex;
            min-height: 0;
        }
        
        .webview-container {
            flex: 1;
            position: relative;
        }
        
        .webview {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Garantir que abas sejam visíveis */
        .tab {
            border: 1px solid var(--border-color, rgba(255,255,255,0.15));
            background: var(--secondary-bg, rgba(255,255,255,0.1));
        }
        
        .tab.active {
            background: var(--glass-bg, rgba(255,255,255,0.08));
            border-bottom-color: var(--accent-color, #007AFF);
        }
    </style>
</head>
<body>
    <!-- Barra de título (Windows) -->
    <div class="titlebar" id="titlebar" style="display: none;">
        <div class="titlebar-drag"></div>
        <div class="titlebar-controls">
            <button class="titlebar-button minimize" id="minimize-btn">−</button>
            <button class="titlebar-button maximize" id="maximize-btn">□</button>
            <button class="titlebar-button close" id="close-btn">×</button>
        </div>
    </div>

    <!-- Barra de ferramentas -->
    <div class="toolbar glass-effect">
        <div class="toolbar-section">
            <button class="nav-button" id="back-btn" title="Voltar" disabled>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M11 2L5 8l6 6"/>
                </svg>
            </button>
            <button class="nav-button" id="forward-btn" title="Avançar" disabled>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M5 2l6 6-6 6"/>
                </svg>
            </button>
            <button class="nav-button" id="refresh-btn" title="Recarregar">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 3a5 5 0 1 0 5 5h-2a3 3 0 1 1-3-3V3z"/>
                </svg>
            </button>
        </div>

        <div class="address-bar-container">
            <div class="address-bar glass-effect">
                <div class="security-indicator" id="security-indicator">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                        <path d="M6 1L3 3v3c0 2 1.5 3.5 3 4 1.5-.5 3-2 3-4V3L6 1z"/>
                    </svg>
                </div>
                <input type="text" id="address-input" placeholder="Digite uma URL ou pesquise...">
                <button class="bookmark-btn" id="bookmark-btn" title="Adicionar aos favoritos">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                        <path d="M3 1v12l4-3 4 3V1H3z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="toolbar-section">
            <button class="toolbar-btn" id="bookmarks-btn" title="Favoritos">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M2 2v12l6-4 6 4V2H2z"/>
                </svg>
            </button>
            <button class="toolbar-btn" id="history-btn" title="Histórico">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 3v5l4 2-1 1.5-5-3V3h2zM8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1z"/>
                </svg>
            </button>
            <button class="toolbar-btn" id="settings-btn" title="Configurações">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8zM6.5 2L6 4.5 4.5 6 2 6.5 4.5 9.5 6 11 6.5 13.5 9.5 11 11 9.5 13.5 6.5 11 4.5 9.5 2 6.5 2z"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Barra de abas -->
    <div class="tab-bar glass-effect">
        <div class="tabs-container" id="tabs-container">
            <!-- Abas serão adicionadas dinamicamente -->
        </div>
        <button class="new-tab-btn" id="new-tab-btn" title="Nova aba">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                <path d="M7 3v8M3 7h8"/>
            </svg>
        </button>
    </div>

    <!-- Área de conteúdo -->
    <div class="content-area">
        <!-- Container para webviews -->
        <div class="webview-container" id="webview-container">
            <!-- Webviews serão adicionadas dinamicamente -->
        </div>

        <!-- Sidebar -->
        <div class="sidebar glass-effect" id="sidebar">
            <div class="sidebar-header">
                <h3 id="sidebar-title">Sidebar</h3>
                <button class="close-sidebar-btn" id="close-sidebar-btn">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                        <path d="M1 1l12 12M13 1L1 13"/>
                    </svg>
                </button>
            </div>
            <div class="sidebar-content" id="sidebar-content">
                <!-- Conteúdo da sidebar será carregado dinamicamente -->
            </div>
        </div>
    </div>

    <!-- Overlay de carregamento -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Modal de configurações -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal glass-effect">
            <div class="modal-header">
                <h2>Configurações</h2>
                <button class="close-modal-btn" id="close-settings-btn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M1 1l14 14M15 1L1 15"/>
                    </svg>
                </button>
            </div>
            
            <div class="modal-content">
                <!-- Geral -->
                <div class="settings-section">
                    <h3>Geral</h3>
                    
                    <div class="setting-item">
                        <label for="search-engine">Mecanismo de busca padrão:</label>
                        <select id="search-engine">
                            <option value="google">Google</option>
                            <option value="bing">Bing</option>
                            <option value="duckduckgo">DuckDuckGo</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <label for="homepage">Página inicial:</label>
                        <input type="url" id="homepage" placeholder="https://www.google.com">
                    </div>
                    
                    <div class="setting-item">
                        <label for="theme">Tema:</label>
                        <select id="theme">
                            <option value="auto">Automático</option>
                            <option value="light">Claro</option>
                            <option value="dark">Escuro</option>
                        </select>
                    </div>
                </div>
                
                <!-- Privacidade -->
                <div class="settings-section">
                    <h3>Privacidade</h3>
                    
                    <label class="checkbox-label">
                        <input type="checkbox" id="block-ads">
                        <span class="checkmark"></span>
                        Bloquear anúncios
                    </label>
                    
                    <label class="checkbox-label">
                        <input type="checkbox" id="block-trackers">
                        <span class="checkmark"></span>
                        Bloquear rastreadores
                    </label>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" id="cancel-settings-btn">Cancelar</button>
                <button class="btn-primary" id="save-settings-btn">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Verificar se estamos no Electron
        const isElectron = typeof window !== 'undefined' && window.electronAPI;
        
        if (!isElectron) {
            console.warn('Executando fora do Electron - algumas funcionalidades podem não funcionar');
            
            // Mock básico para desenvolvimento
            window.electronAPI = {
                getSettings: () => Promise.resolve({
                    searchEngine: 'google',
                    homepage: 'https://www.google.com',
                    theme: 'auto',
                    privacy: { blockAds: true, blockTrackers: true }
                }),
                saveSettings: (settings) => Promise.resolve(settings),
                getBookmarks: () => Promise.resolve([]),
                saveBookmark: (bookmark) => Promise.resolve([bookmark]),
                removeBookmark: (id) => Promise.resolve([]),
                getHistory: () => Promise.resolve([]),
                saveHistory: (item) => Promise.resolve([item]),
                clearHistory: () => Promise.resolve([]),
                on: () => {},
                platform: 'web'
            };
        }
    </script>
    <script src="browser.js"></script>
    <script src="settings.js"></script>
</body>
</html>
